<div class="semaforo-deudas">
  <!-- Estado: Cargando -->
  <div *ngIf="isLoading"
       class="inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-lg border border-gray-300">
    <app-icon name="loader" [size]="iconSize" class="animate-spin text-gray-500"></app-icon>
    <span class="text-xs text-gray-600 font-medium">Verificando...</span>
  </div>

  <!-- Estado: Error -->
  <div *ngIf="!isLoading && error"
       class="inline-flex items-center gap-2 px-3 py-1.5 bg-yellow-50 rounded-lg border-2 border-yellow-300">
    <app-icon name="alert-triangle" [size]="iconSize" class="text-yellow-600"></app-icon>
    <span class="text-xs text-yellow-700 font-medium">Error al verificar</span>
  </div>

  <!-- Estado: Datos cargados -->
  <div *ngIf="!isLoading && !error" [class]="badgeClasses">
    <app-icon [name]="semaforoState.iconoSemaforo"
              [size]="iconSize"
              [class]="semaforoState.colorSemaforo"></app-icon>

    <span [class]="semaforoState.colorSemaforo">
      {{ semaforoState.textoSemaforo }}
    </span>

    <!-- Detalle expandido (opcional) -->
    <div *ngIf="mostrarDetalle && !compacto && (semaforoState.detalleSangre || semaforoState.detalleEconomica)"
         class="ml-2 pl-2 border-l-2"
         [ngClass]="semaforoState.bloqueaRetiro ? 'border-red-300' : 'border-green-300'">

      <!-- Deuda Sangre -->
      <div *ngIf="semaforoState.detalleSangre"
           class="flex items-center gap-1.5 text-xs">
        <app-icon name="droplet" [size]="12" class="flex-shrink-0"></app-icon>
        <span>{{ semaforoState.detalleSangre }}</span>
      </div>

      <!-- Deuda EconÃ³mica -->
      <div *ngIf="semaforoState.detalleEconomica"
           class="flex items-center gap-1.5 text-xs"
           [ngClass]="semaforoState.detalleSangre ? 'mt-1' : ''">
        <app-icon name="credit-card" [size]="12" class="flex-shrink-0"></app-icon>
        <span>{{ semaforoState.detalleEconomica }}</span>
      </div>
    </div>
  </div>
</div>
